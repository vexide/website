---
title: vexide 0.8.0 Migration Guide
description: Migrate to the new vexide 0.8.0 runtime.
tags: ["writeups"]
author: lewisfm
date: 2025-09-04
---

vexide v0.8 is a new version of the runtime including improvements such as: support for the Rust Standard Library, new async runtime APIs, support for encoders with custom resolutions, the option to use the official VEX SDK, and various bug fixes. While we have aimed to minimize breaking changes, you will need to update your existing projects to make them compatible with this new release.

# Project Migration Tool

For this release, we've added an automatic migration tool to do much of the hard part for you:

```sh
cargo v5 migrate
```

> [!IMPORTANT]
> This will handle updating vexide, enabling the Rust Standard Library, and updating your project's Cargo configuration. However, it won't handle any changes to vexide's API, so if you encounter any build errors after the update, consult the [API Changes](#api-changes) section.

You'll need to have the latest version of cargo-v5 installed to use this command, so make sure to update it beforehand with `cargo v5 self-update`. **We also strongly suggest testing the upgrade on a separate branch**, then merging it once you've reviewed the changes to your code and verified that they work.

Even if you run the upgrade tool with no complications, we still recommend reading through all of the [API Changes](#api-changes) included in 0.8.0 to get a good idea of what's changed and make sure the upgrade tool didn't miss anything.

# Manual Upgrade Guide

Here's a comprehensive guide on upgrading to vexide v0.8 from v0.7. Apart from the [API Changes](#api-changes), most of these differences can be handled by our [Project Migration Tool](#project-migration-tool).

## Update cargo-v5

Update to the latest version of cargo-v5 (0.12.0 at the time of writing this).

```sh
cargo v5 self-update
```

## Update Rust

Update your `rust-toolchain.toml` file to install a newer version of Rust nightly *(must be 1.91 or newer)*.

```toml title="rust-toolchain.toml"
[toolchain]
# @diff +
channel = "nightly-2025-11-26"
# @diff -
channel = "nightly"
components = ["rust-src"]
```

## Update vexide

To use vexide 0.8.0, you'll need to update it in your dependencies table, then choose which SDKs you'd like to enable. Use the configuration below to keep your project's existing behavior.

```toml title="Cargo.toml"
# @fold start
[package]
name = "my-vexide-project"
version = "0.1.0"
edition = "2024"

[package.metadata.v5]
upload-strategy = "differential"
slot = 1
icon = "cool-x"
compress = true

# @fold end
[dependencies]
# @diff -
vexide = "0.7.0"

# @diff + start
[dependencies.vexide]
version = "0.8.0"
features = ["full", "default-sdk"]
# @diff + end
```

> [!TIP]
> If you're updating a library that uses vexide, don't enable `full`
> or any of the SDK features. <br /> Please read the
> [vexide features guide](/docs/features/) for more information.

## Enable Standard Library Support

In vexide 0.8.0, projects use Rust's new builtin support for VEX V5 devices. As a result, you may now use the comprehensive [Rust&nbsp;Standard&nbsp;Library][std]&nbsp;(`std`) in your vexide projects! Enable it by taking the following steps:

[std]: https://docs.rs/std

Update `.cargo/config.toml` to use Rust's builtin VEX V5 support and enable the standard library.

```toml title=".cargo/config.toml"
# @diff - start
[build]
target = "./armv7a-vex-v5.json"
# @diff - end

[unstable]
# @diff +
#           (                   )
build-std = ["std", "panic_abort"]
# @diff -
#           (                                    )
build-std = ["core", "compiler_builtins", "alloc"]
build-std-features = ["compiler-builtins-mem"]
```

Delete the old `armv7a-vex-v5.json` target file.

```jsonc title="armv7a-vex-v5.json"
// @diff - start
{
    "cpu": "cortex-a9",
    "arch": "arm",
    "abi": "eabihf",
    // ...etc...
}
// @diff - end
```

Update your project's source code to allow importing from the standard library.

```rs title="src/main.rs"
// @diff -
#![no_main]
// @diff -
#![no_std]

// @diff -
extern crate alloc;

use vexide::prelude::*;

#[vexide::main]
async fn main(peripherals: Peripherals) {
    println!("Hello, world!");
}
```

## Enable vexide's Custom Memory Layout

In order to support features like differential uploading and async task-locals, vexide v0.8 requires all projects to enable its custom memory layout in the Cargo config file:

```toml title=".config/cargo.toml"
# @diff + start
[target.'cfg(target_os = "vexos")']
rustflags = ["-Clink-arg=-Tvexide.ld"]
# @diff + end

[unstable]
build-std = ["std", "panic_abort"]
build-std-features = ["compiler-builtins-mem"]
```

# API Changes

> [!NOTE]
>
> This section describes the most common breakages in projects when updating to v0.8.0. Some changes are not
> included here. Check out the [vexide changelog](https://github.com/vexide/vexide/blob/main/CHANGELOG.md)
> for a comprehensive list!

## Position Arithmetic

`Position` structs are now internally represented as floating point values.

```rs
let pos1 = Position::from_degrees(90.0);

// @diff - start
let pos2 = pos1 / 2;
let pos3 = pos1 * 2;
// @diff - end

// @diff + start
let pos2 = pos1 / 2.0;
let pos3 = pos1 * 2.0;
// @diff + end
```

## ADI Encoder Ticks

The `AdiEncoder` struct now requires you to specify a custom encoder Ticks Per Revolution value. To keep the old behavior, use `AdiOpticalEncoder`.

```rs
// @diff -
let encoder = AdiEncoder::new(peripherals.adi_a, peripherals.adi_b);

// @diff +
let encoder = AdiOpticalEncoder::new(peripherals.adi_a, peripherals.adi_b);
```

## New Angle type

There is a new unit-aware `Angle` type used to store rotational displacements, replacing the old `Position` type. Functions and structs that previously worked with an angle in degrees or radians now use the new `Angle` type.

```rs
let gyro = AdiGyroscope::new(peripherals.adi_a);

// @diff -
let yaw_pos: Position = gyro.yaw()?;
// @diff +
let yaw_pos: Angle = gyro.yaw()?;

let potentiometer = AdiPotentiometer::new(peripherals.adi_a, PotentiometerType::V2);

// @diff -
let angle: f64 = potentiometer.angle()?;
// @diff +
let angle: Angle = potentiometer.angle()?;

let mut sensor = InertialSensor::new(peripherals.port_1);
sensor.calibrate().await?;

// @diff -
let rotation: f64 = sensor.rotation()?;
// @diff +
let rotation: Angle = sensor.angle()?;
```

Angle revolutions are now called turns.

```rs
// @diff -
let pos = Position::from_revolutions(10.0);
// @diff +
let angle = Angle::from_turns(10.0);
```

## Display coordinates are half-open

When using vexide's shape-drawing APIs, the bottom-right coordinate is no longer included in the shape's bounds. As a result, you no longer need to add `1` when calculating a rectangle's width or height.

Additionally, the points in a `Rect` have been renamed to `bottom_right` and `top_left`.

```rs
// Create a 20x20 rectangle:
// @diff -
let rect = Rect::new([30, 40], [49, 59]);
// @diff +
let rect = Rect::new([30, 40], [50, 60]);

// Check its width:
// @diff -
let width = 1 + rect.end.x - rect.start.x;
// @diff +
let width = rect.bottom_right.x - rect.top_left.x;

assert_eq!(width, 20);
```

## Rotation Sensor Calculation Interval

The function for changing the calculation interval of a `RotationSensor` was renamed from `set_computation_interval` to `set_data_interval`.

```rs
let mut sensor = RotationSensor::new(peripherals.port_1, Direction::Forward);
let interval = Duration::from_millis(10);

// @diff -
sensor.set_computation_interval(interval)?;
// @diff +
sensor.set_data_interval(interval)?;
```

## Buffer stride removed

The `Display::draw_buffer` function no longer takes a stride argument.

```rs
let buf: &[u32] = [
    0, 0, 0, 0, // row 1
    // ...etc...
];
let region = Rect::new([1, 1], [4, 4]);

// @diff -
let width = 1 + region.end.x - region.start.x;
// @diff -
//                             (     )
display.draw_buffer(region, buf, width);
// @diff +
display.draw_buffer(region, buf);
```

## Crate submodule layout

The vexide crate now has fewer deeply-nested modules. For instance, all `vexide::devices::` modules are now imported from `vexide::`.

```rs
// @diff -
//        (       )
use vexide::devices::smart::motor::MotorStatus;
// @diff +
use vexide::smart::motor::MotorStatus;
```

Additionally, items that are included in the Rust Standard Library should no longer be imported from `vexide`.

```rs
// @diff -
use vexide::io::Error;
// @diff +
use std::io::Error;
```

## New Color type

The `Color` type should now be used instead of `Rgb`. It's now imported from `vexide::color`.

```rs
// @diff -
use vexide::devices::rgb::Rgb;
// @diff +
use vexide::color::Color;

let rect = Rect::new([20, 30], [40, 50]);

// @diff -
display.fill(&rect, Rgb::new(0xFF, 0xFF, 0xFF));
// @diff +
display.fill(&rect, Color::new(0xFF, 0xFF, 0xFF));

// Or...
// @diff +
display.fill(&rect, Color::WHITE);
```

## Touch events have a Point

Display touch events now store their x and y coordinates in a `Point`.

```rs
// Draw a circle wherever the user touches.
loop {
    let event = display.touch_status();

    let circle = Circle::new(
    // @diff -
        [event.x, event.y],
    // @diff +
        event.point,
        10,
    );
    display.fill(&circle, Color::WHITE);

    sleep(Duration::from_millis(5)).await;
}
```

## Error types updated

Some functions now return different error types, or their errors types have been renamed.

| Before              | After                 |
|---------------------|-----------------------|
| `MotorError`        | `PortError`           |
| `DistanceError`     | `DistanceObjectError` |
| `AiVisionError`     | `AiVisionObjectError` |
| `AdiGyroscopeError` | `YawError`            |

## Cargo features renamed

Some of vexide's optional features have been renamed.

| Before                   | After                    |
|--------------------------|--------------------------|
| `backtraces`             | `backtrace`              |
| `dangerous_motor_tuning` | `dangerous-motor-tuning` |
| `force_rust_libm`        | (removed)                |

```toml title="Cargo.toml"
[dependencies.vexide]
version = "0.8"
default-features = false
# @diff -
features = ["backtraces"]
# @diff +
features = ["backtrace"]
```

See the [features](/docs/features/) page for a full list of features available in 0.8.0.

## Text drawing uses C Strings

The `Text::new` function now requires you to pass in a C string.

```rs
let text = Text::new(
// @diff -
    "Hello, world",
// @diff +
    c"Hello, world",
    Font::default(),
    [50, 50],
);
```

You can use the new `Text::from_string` to keep the old behavior.

```rs
let string = "Hello, world".to_string();

let text = Text::from_string(
    string,
    Font::default(),
    [50, 50],
);
```

## Text alignment uses one struct

The `HAlign` and `VAlign` structs have been merged into the `Alignment` type.

```rs
let mut text = Text::new(
    c"Hello, world",
    Font::default(),
    [50, 50],
);

text.align(
// @diff -
    HAlign::Center,
// @diff -
    VAlign::Center,
// @diff +
    Alignment::Center,
// @diff +
    Alignment::Center,
);
```

## Manual usage of startup function

> [!NOTE]
> This is an advanced feature and it is unlikely your project is affected. If you use the
> `#[vexide::main]` attribute, this change does not affect your project.

The `vexide::startup::startup()` function no longer handles printing vexide's banner message.

If you are manually calling `vexide::startup::startup()`, you will need to explicitly print vexide's banner to keep the previous behavior.

```rs
unsafe {
    // @diff -
    //                      (      )
    vexide::startup::startup::<true>();

    // @diff +
    vexide::startup::startup();
    // @diff +
    vexide::startup::banner::print();
}
```
